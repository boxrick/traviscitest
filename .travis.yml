language: python
python: "2.7"
sudo: required

env:
  - distro: ubuntu1804

before_install:
  - sudo apt-get update -qq

services:
  - docker

install:
  # Install Ansible.
  - pip install ansible
  - sudo apt-get install apt-transport-https vagrant ca-certificates curl software-properties-common -y
  - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
  - sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
  - sudo apt-get update
  - sudo apt-get -y install docker-ce
script:
  - vagrant up --provider docker
  #
  # container_id=$(mktemp)
  # - 'sudo docker run -d --name systemd --security-opt seccomp=unconfined --tmpfs /run --tmpfs /run/lock -v /sys/fs/cgroup:/sys/fs/cgroup:ro -t boxrick/bionic-docker-ansible > "${container_id}"'
